# goCalc-v3 - –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π

<div align="center">
  <img src="https://img.shields.io/badge/Go-1.20+-00ADD8?style=for-the-badge&logo=go&logoColor=white" alt="Go 1.20+"/>
  <img src="https://img.shields.io/badge/PostgreSQL-Required-336791?style=for-the-badge&logo=postgresql&logoColor=white" alt="PostgreSQL Required"/>
  <img src="https://img.shields.io/badge/Docker-Supported-2496ED?style=for-the-badge&logo=docker&logoColor=white" alt="Docker Supported"/>
</div>

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**goCalc-v3** - —ç—Ç–æ —ç–≤–æ–ª—é—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –Ω–∞ —è–∑—ã–∫–µ Go. –≠—Ç–∞ –≤–µ—Ä—Å–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç:

*   **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JWT.
*   **–ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ PostgreSQL.
*   **–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Ä–µ–∂–∏–º**: (–í –ø—Ä–æ—Ü–µ—Å—Å–µ) –í—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.


## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

*   Go 1.20 –∏–ª–∏ –≤—ã—à–µ
*   Git
*   **PostgreSQL**: –ó–∞–ø—É—â–µ–Ω–Ω—ã–π –∏ –¥–æ—Å—Ç—É–ø–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä PostgreSQL.
*   Docker –∏ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ª–µ–≥–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ PostgreSQL –∏ —Å–∞–º–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è).

## üöÄ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/superlogarifm/goCalc-v2.git
cd goCalc-v2
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
go mod download
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º.

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è        | –û–ø–∏—Å–∞–Ω–∏–µ                                      | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–ü—Ä–∏–º–µ—Ä!)                         | –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ |
| :---------------- | :-------------------------------------------- | :------------------------------------------------------ | :---------: |
| `DATABASE_URL`    | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL               | `postgres://postgres:postgres@localhost:5432/gocalc?sslmode=disable` |     ‚úÖ      |
| `JWT_SECRET_KEY`  | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ JWT —Ç–æ–∫–µ–Ω–æ–≤       | `a-very-insecure-secret-key-replace-me`                 |     ‚úÖ      |
| `TOKEN_DURATION`  | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ JWT —Ç–æ–∫–µ–Ω–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `24h`, `1h30m`) | `24h`                                                   |     ‚ùå      |
| `HOST`            | –•–æ—Å—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å —Å–µ—Ä–≤–∏—Å         | `127.0.0.1`                                             |     ‚ùå      |
| `PORT`            | –ü–æ—Ä—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç —Å–ª—É—à–∞—Ç—å —Å–µ—Ä–≤–∏—Å         | `8080`                                                  |     ‚ùå      |

**‚ö†Ô∏è –í–∞–∂–Ω–æ:**
*   –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ **–∑–∞–º–µ–Ω–∏—Ç–µ** `JWT_SECRET_KEY` –Ω–∞ –≤–∞—à —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π, –Ω–∞–¥–µ–∂–Ω—ã–π –∫–ª—é—á –≤ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ä–µ–¥–µ!
*   –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (`gocalc` –≤ –ø—Ä–∏–º–µ—Ä–µ `DATABASE_URL`) **—Å—É—â–µ—Å—Ç–≤—É–µ—Ç** –≤ –≤–∞—à–µ–º PostgreSQL. –°–µ—Ä–≤–∏—Å —Å–æ–∑–¥–∞—Å—Ç –Ω—É–∂–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã, –Ω–æ –Ω–µ —Å–∞–º—É –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

*(–û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è –∞–≥–µ–Ω—Ç–æ–≤/–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–∞, –µ—Å–ª–∏ –æ–Ω–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã)*

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|------------|----------|------------------------|
| `TIME_ADDITION_MS` | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–∂–µ–Ω–∏—è –≤ –º—Å | 5000 |
| `TIME_SUBTRACTION_MS` | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã—á–∏—Ç–∞–Ω–∏—è –≤ –º—Å | 5000 |
| `TIME_MULTIPLICATIONS_MS` | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ —É–º–Ω–æ–∂–µ–Ω–∏—è –≤ –º—Å | 5000 |
| `TIME_DIVISIONS_MS` | –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–µ–ª–µ–Ω–∏—è –≤ –º—Å | 5000 |


## ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

### –°–ø–æ—Å–æ–± 1: –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫

1.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ PostgreSQL**: –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∞—à —Å–µ—Ä–≤–µ—Ä PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω.
2.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
    ```bash
    # Linux/macOS
    export DATABASE_URL="postgres://user:pass@host:port/dbname?sslmode=disable"
    export JWT_SECRET_KEY="your_super_secret_key"
    # Windows (PowerShell)
    $env:DATABASE_URL="postgres://user:pass@host:port/dbname?sslmode=disable"
    $env:JWT_SECRET_KEY="your_super_secret_key"
    ```
3.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä**:
    ```bash
    go run ./cmd/calc_service/start.go
    ```
4.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–≥–µ–Ω—Ç–æ–≤**:
    ```bash
    # –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ ORCHESTRATOR_URL, –µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ
    go run ./cmd/agent/main.go
    ```

### –°–ø–æ—Å–æ–± 2: –ó–∞–ø—É—Å–∫ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Docker Compose (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

–§–∞–π–ª `docker-compose.yml` –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL.

1.  **(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)** –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ `JWT_SECRET_KEY`). –ó–Ω–∞—á–µ–Ω–∏—è –∏–∑ `.env` –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Ö–≤–∞—á–µ–Ω—ã `docker-compose`.
    ```.env
    # –ü—Ä–∏–º–µ—Ä .env —Ñ–∞–π–ª–∞
    POSTGRES_PASSWORD=mysecretpassword # –ü–∞—Ä–æ–ª—å –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –ë–î
    JWT_SECRET_KEY=my_really_strong_and_secret_key_12345
    TOKEN_DURATION=8h
    # DATABASE_URL –±—É–¥–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω –≤–Ω—É—Ç—Ä–∏ docker-compose
    ```
2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã**:
    ```bash
    docker-compose up --build -d
    ```
    * `--build` –ø–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑—ã, –µ—Å–ª–∏ –∫–æ–¥ –∏–∑–º–µ–Ω–∏–ª—Å—è.
    * `-d` –∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.

3.  **–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤**:
    ```bash
    docker-compose down
    ```

## üì° API

–ë–∞–∑–æ–≤—ã–π URL: `http://localhost:8080` (–∏–ª–∏ –¥—Ä—É–≥–æ–π —Ö–æ—Å—Ç/–ø–æ—Ä—Ç, –µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ).

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

*   **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/register`
*   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `application/json`
    ```json
    {
      "login": "testuser",
      "password": "password123"
    }
    ```
*   **–û—Ç–≤–µ—Ç (–£—Å–ø–µ—Ö):** `200 OK`
*   **–û—Ç–≤–µ—Ç (–û—à–∏–±–∫–∞):**
    *   `400 Bad Request` (–ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ä–æ—Ç–∫–∏–π –ø–∞—Ä–æ–ª—å –∏ —Ç.–¥.)
    *   `409 Conflict` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –ª–æ–≥–∏–Ω–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
    *   `500 Internal Server Error`

*   **–ü—Ä–∏–º–µ—Ä `curl`:**
    ```bash
    curl --location 'localhost:8080/api/v1/register' \
    --header 'Content-Type: application/json' \
    --data '{
        "login": "myuser",
        "password": "mypassword"
    }'
    ```

#### –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

*   **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/login`
*   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `application/json`
    ```json
    {
      "login": "testuser",
      "password": "password123"
    }
    ```
*   **–û—Ç–≤–µ—Ç (–£—Å–ø–µ—Ö):** `200 OK` —Å —Ç–µ–ª–æ–º:
    ```json
    {
      "token": "your_jwt_token_here"
    }
    ```
*   **–û—Ç–≤–µ—Ç (–û—à–∏–±–∫–∞):**
    *   `400 Bad Request` (–ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞)
    *   `401 Unauthorized` (–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å)
    *   `500 Internal Server Error`

*   **–ü—Ä–∏–º–µ—Ä `curl`:**
    ```bash
    curl --location 'localhost:8080/api/v1/login' \
    --header 'Content-Type: application/json' \
    --data '{
        "login": "myuser",
        "password": "mypassword"
    }'
    ```
    *(–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π `token` –¥–ª—è —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤)*

### –í—ã—á–∏—Å–ª–µ–Ω–∏—è (–¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)

#### –û—Ç–ø—Ä–∞–≤–∫–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ

*   **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/v1/calculate`
*   **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** `Authorization: Bearer <your_jwt_token_here>`
*   **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:** `application/json`
    ```json
    {
      "expression": "2+2*2"
    }
    ```
*   **–û—Ç–≤–µ—Ç (–£—Å–ø–µ—Ö):** `200 OK` —Å —Ç–µ–ª–æ–º:
    ```json
    {
      "result": 6
    }
    ```
*   **–û—Ç–≤–µ—Ç (–û—à–∏–±–∫–∞):**
    *   `400 Bad Request` (–ù–µ–≤–µ—Ä–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞, –ø—É—Å—Ç–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ)
    *   `401 Unauthorized` (–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞, –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω, –∏—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω)
    *   `422 Unprocessable Entity` (–û—à–∏–±–∫–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –Ω–æ–ª—å)
    *   `500 Internal Server Error`

*   **–ü—Ä–∏–º–µ—Ä `curl` (–∑–∞–º–µ–Ω–∏—Ç–µ `YOUR_TOKEN`):**
    ```bash
    TOKEN="YOUR_TOKEN" # –í—Å—Ç–∞–≤—å—Ç–µ —Å—é–¥–∞ —Ç–æ–∫–µ–Ω, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –ø—Ä–∏ –ª–æ–≥–∏–Ω–µ

    curl --location 'localhost:8080/api/v1/calculate' \
    --header "Authorization: Bearer $TOKEN" \
    --header 'Content-Type: application/json' \
    --data '{
        "expression": "(10+5)*2-3/1.5"
    }'
    ```

#### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å –ø–æ–º–æ—â—å—é —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `POST /api/v1/calculate`, –≤—ã –ø–æ–ª—É—á–∏—Ç–µ `expression_id`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç ID –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Å—Ç–∞—Ç—É—Å–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.

*   **–≠–Ω–¥–ø–æ–∏–Ω—Ç:** `GET /api/v1/expressions/{id}`
    *   –ó–∞–º–µ–Ω–∏—Ç–µ `{id}` –Ω–∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–π `expression_id`.
*   **–ó–∞–≥–æ–ª–æ–≤–æ–∫:** `Authorization: Bearer <your_jwt_token_here>`
*   **–û—Ç–≤–µ—Ç (–£—Å–ø–µ—Ö):** `200 OK` —Å —Ç–µ–ª–æ–º, —Å–æ–¥–µ—Ä–∂–∞—â–∏–º –¥–µ—Ç–∞–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è:
    ```json
    {
      "expression": {
        "id": "123", // ID –≤–∞—à–µ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è
        "expression": "(10+5)*2-3/1.5", // –ò—Å—Ö–æ–¥–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ
        "status": "completed", // –°—Ç–∞—Ç—É—Å: pending, processing, completed, error
        "result": 28.0,        // –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã—á–∏—Å–ª–µ–Ω–∏—è (–µ—Å–ª–∏ status="completed")
        "error": null          // –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ (–µ—Å–ª–∏ status="error")
      }
    }
    ```
    *   –ü–æ–ª–µ `result` –±—É–¥–µ—Ç –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–æ, –µ—Å–ª–∏ `status` —Ä–∞–≤–µ–Ω `"completed"`.
    *   –ü–æ–ª–µ `error` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ, –µ—Å–ª–∏ `status` —Ä–∞–≤–µ–Ω `"error"`.
    *   –ü–æ–ª–µ `expression` (–≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ expression) —Å–æ–¥–µ—Ä–∂–∏—Ç –∏—Å—Ö–æ–¥–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–≤–µ—Ç–∞—Ö –∏–ª–∏ –±—ã—Ç—å `omitempty`.

*   **–û—Ç–≤–µ—Ç (–û—à–∏–±–∫–∞):**
    *   `401 Unauthorized` (–ù–µ—Ç —Ç–æ–∫–µ–Ω–∞, –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω, –∏—Å—Ç–µ–∫—à–∏–π —Ç–æ–∫–µ–Ω)
    *   `404 Not Found` (–í—ã—Ä–∞–∂–µ–Ω–∏–µ —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º ID –Ω–µ –Ω–∞–π–¥–µ–Ω–æ)
    *   `500 Internal Server Error`

*   **–ü—Ä–∏–º–µ—Ä `curl` (–∑–∞–º–µ–Ω–∏—Ç–µ `YOUR_TOKEN` –∏ `EXPRESSION_ID`):**
    ```bash
    TOKEN="YOUR_TOKEN" 
    EXPRESSION_ID="YOUR_EXPRESSION_ID" # ID, –ø–æ–ª—É—á–µ–Ω–Ω—ã–π –æ—Ç /api/v1/calculate

    curl --location "localhost:8080/api/v1/expressions/$EXPRESSION_ID" \
    --header "Authorization: Bearer $TOKEN"
    ```

*(–û—Å—Ç–∞–ª—å–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –µ—Å–ª–∏ –æ–Ω–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, /api/v1/expressions/{id})*

## ‚ö†Ô∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

*   **`Failed to connect to database`**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `DATABASE_URL` –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞ PostgreSQL. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ –ø–∞—Ä–æ–ª—å –≤–µ—Ä–Ω—ã, –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
*   **`JWT_SECRET_KEY environment variable not set`**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è `JWT_SECRET_KEY`.

### –ü—Ä–æ–±–ª–µ–º—ã —Å Docker Compose

*   **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `db` –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (`docker-compose logs db`). –í–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–∞—Ä–æ–ª–µ–º –∏–ª–∏ –Ω–µ—Ö–≤–∞—Ç–∫–æ–π —Ä–µ—Å—É—Ä—Å–æ–≤.
*   **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä `calc_service` –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ (`docker-compose logs calc_service`). –ß–∞—Å—Ç–æ —ç—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `db` –µ—â–µ –Ω–µ —É—Å–ø–µ–ª –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π `DATABASE_URL` –≤–Ω—É—Ç—Ä–∏ docker-compose). `docker-compose.yml` –æ–±—ã—á–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç `depends_on`, –Ω–æ –∏–Ω–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–∂–∏–¥–∞–Ω–∏—è.

### –õ–æ–≥–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

```bash
docker-compose logs             # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose logs -f db       # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ –ë–î –∏ —Å–ª–µ–¥–∏—Ç—å –∑–∞ –Ω–∏–º–∏
docker-compose logs calc_service # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
```

 
